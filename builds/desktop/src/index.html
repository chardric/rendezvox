<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; connect-src https: http:; media-src https: http:; img-src https: http: 'self' data:; script-src 'self'; style-src 'self';" />
  <title>RendezVox</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Server Selection Screen -->
  <div id="server-screen">
    <div id="server-card">
      <div id="server-brand">RendezVox</div>
      <div id="server-subtitle">Connect to a server</div>

      <label class="server-option">
        <input type="radio" name="server-choice" value="official" checked />
        <span class="server-option-label">Official Server</span>
        <span class="server-option-url">radio.chadlinuxtech.net</span>
      </label>

      <label class="server-option">
        <input type="radio" name="server-choice" value="custom" />
        <span class="server-option-label">Custom Server</span>
      </label>

      <input type="text" id="custom-url" class="field-input" placeholder="https://your-server.com" autocomplete="off" />

      <button id="server-connect" class="btn-submit">Connect</button>
      <div id="server-error"></div>
    </div>
  </div>

  <div id="app">
    <div id="content">

      <!-- Offline banner -->
      <div id="offline-banner">Server offline — Retrying…</div>

      <!-- Station -->
      <div id="station-name">RendezVox</div>
      <div id="station-tagline">Online Radio</div>

      <!-- Cover Art / Vinyl -->
      <div id="cover-wrap">
        <div id="vinyl">
          <div class="vinyl-groove groove-outer"></div>
          <div class="vinyl-groove groove-mid"></div>
          <div class="vinyl-groove groove-inner"></div>
          <div id="vinyl-center">
            <div id="vinyl-hole"></div>
          </div>
        </div>
        <img id="cover-art" alt="Cover Art" />
      </div>

      <!-- Now playing info -->
      <div id="now-playing-wrap">
        <div id="connecting-msg">Connecting…</div>
        <div id="connecting-bar"></div>
        <div id="song-title">—</div>
        <div id="song-artist"></div>
      </div>

      <!-- Progress bar -->
      <div id="progress-wrap">
        <div id="progress-track">
          <div id="progress-fill"></div>
        </div>
        <div id="progress-times">
          <span id="time-elapsed">0:00</span>
          <span id="time-remain">-0:00</span>
        </div>
      </div>

      <!-- Controls row: volume + play + request -->
      <div id="controls-row">
        <svg id="vol-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
        </svg>
        <input type="range" id="volume-slider" min="0" max="1" step="0.02" value="0.8" />

        <button id="play-btn" aria-label="Play">
          <svg id="icon-play" class="play-icon active" width="28" height="28" viewBox="0 0 24 24" fill="white">
            <path d="M8 5v14l11-7z"/>
          </svg>
          <svg id="icon-stop" class="play-icon" width="26" height="26" viewBox="0 0 24 24" fill="white">
            <rect x="6" y="6" width="12" height="12" rx="1"/>
          </svg>
          <div class="play-icon spinner" id="icon-spinner"></div>
        </button>

        <button id="request-btn" aria-label="Request a Song">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/>
          </svg>
        </button>
      </div>

      <!-- Info card -->
      <div id="info-card">
        <div class="info-row">
          <svg class="info-icon" width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 18l8.5-6L6 6v12zm2-8.14L11.03 12 8 14.14V9.86zM16 6h2v12h-2z"/>
          </svg>
          <span class="info-value" id="up-next">—</span>
        </div>
        <hr class="info-divider" />
        <div class="info-row">
          <svg class="info-icon" width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 1a9 9 0 0 0-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7a9 9 0 0 0-9-9z"/>
          </svg>
          <span class="info-value"><span id="listener-count">0</span> listening</span>
        </div>
      </div>

      <!-- Dedication card -->
      <div id="dedication-card">
        <div id="dedication-label">REQUESTED BY</div>
        <div id="dedication-name"></div>
        <div id="dedication-message"></div>
      </div>

      <!-- Autostart toggle -->
      <div id="autostart-row">
        <span id="autostart-label">Start on login</span>
        <label class="toggle">
          <input type="checkbox" id="autostart-toggle" />
          <span class="toggle-track"></span>
        </label>
      </div>

      <div id="footer">
        <span>&copy; 2026 <a href="https://downstreamtech.net" target="_blank" rel="noopener">DownStreamTech</a>. All rights reserved.</span>
        <button id="btn-about" title="About RendezVox">i</button>
      </div>
    </div>
  </div>

  <!-- About Modal -->
  <div id="about-overlay">
    <div id="about-modal">
      <div id="about-header">
        <span>About RendezVox</span>
        <button id="about-close" aria-label="Close">&times;</button>
      </div>
      <p id="about-desc">Your personal online FM radio station — stream music, request songs, and listen live from any device, anywhere.</p>
      <div class="about-section">
        <div class="about-label">Links</div>
        <a href="https://downstreamtech.net" target="_blank" rel="noopener">downstreamtech.net</a><br>
        <a href="https://radio.chadlinuxtech.net" target="_blank" rel="noopener">radio.chadlinuxtech.net</a>
      </div>
      <div class="about-section">
        <div class="about-label">Support</div>
        <div>Phone: <a href="tel:+639177927953">+639177927953</a></div>
        <div>Email: <a href="mailto:support@downstreamtech.net">support@downstreamtech.net</a></div>
      </div>
      <div class="about-section">
        <div class="about-label">Developer</div>
        <div>Engr. Richard R. Ayuyang, PhD</div>
        <div class="about-dim">Professor II, CSU</div>
      </div>
      <div class="about-section">
        <div class="about-label">Server</div>
        <div id="about-server-url"></div>
        <a href="#" id="change-server">Change Server</a>
      </div>
    </div>
  </div>

  <!-- Request Modal -->
  <div id="modal-overlay" role="dialog" aria-modal="true" aria-label="Request a Song">
    <div id="modal">
      <div id="modal-header">
        <span id="modal-title">Request a Song</span>
        <button id="modal-close" aria-label="Close">&times;</button>
      </div>

      <div id="modal-status"></div>

      <div id="resolved-indicator">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
        </svg>
        <span id="resolved-text"></span>
      </div>

      <div class="field-group">
        <label class="field-label" for="req-title">Song Title</label>
        <input class="field-input" id="req-title" type="text" placeholder="Start typing a title…" autocomplete="off" />
        <div id="suggestions-list"></div>
      </div>

      <div class="field-group">
        <label class="field-label" for="req-artist">Artist</label>
        <input class="field-input" id="req-artist" type="text" placeholder="Artist name" autocomplete="off" />
      </div>

      <div class="field-group">
        <label class="field-label" for="req-name">Your Name (optional)</label>
        <input class="field-input" id="req-name" type="text" placeholder="Listener name" autocomplete="off" />
      </div>

      <div class="field-group">
        <label class="field-label" for="req-message">Message (optional)</label>
        <textarea class="field-input" id="req-message" placeholder="Dedication or note…" rows="2"></textarea>
      </div>

      <div id="modal-actions">
        <button class="btn-cancel" id="modal-cancel">Cancel</button>
        <button class="btn-submit" id="modal-submit">Submit</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
